
def TYPE_OOPTEST "ooptest" mktype =TYPE_OOPTEST

"testfn" {
    "set type back to original" #
    TYPE_INT settype itos puts
    " works\n" puts
} TYPE_OOPTEST defmethod

func testfn {
    itos puts
    " oops thats wrong\n" puts
}

func main {
    pop
    "testing with correct type (should use object method)\n" puts
    5 TYPE_OOPTEST settype testfn
    "testing without correct type (should use normal function)\n" puts
    5 testfn
    0
}
